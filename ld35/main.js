!function(){"use strict";function t(t){var e=Math.floor(x),o=d[e%d.length];if(t.beginPath(),x===e)for(var n=0,a=y.length;a>n;++n){var r=o[2*n],i=o[2*n+1];"m"===y[n]?t.moveTo(r,i):t.lineTo(r,i)}else for(var l=d[(e+1)%d.length],h=x-e,c=0,s=y.length;s>c;++c){var u=o[2*c]*(1-h)+l[2*c]*h,v=o[2*c+1]*(1-h)+l[2*c+1]*h;"m"===y[c]?t.moveTo(u,v):t.lineTo(u,v)}}function e(t,e){e.save();var o=Math.floor(x),n=x-o;e.globalAlpha=n||w[t]?.5:1,e.lineJoin="miter",e.lineWidth=2.5;var a=g[o%g.length],r=g[(o+1)%g.length],i=a[2*t]*(1-n)+r[2*t]*n,l=a[2*t+1]*(1-n)+r[2*t+1]*n;e.translate(i,l),e.rotate(5e-4*V),e.strokeRect(-15,-15,30,30),e.restore()}function o(t){for(var o=0,n=w.length;n>o;++o)e(o,t)}function n(t,e){if(Math.floor(x)!==x)return!1;for(var o=0,n=w.length;n>o;++o){var a=g[x%g.length][2*o],r=g[x%g.length][2*o+1];if(l(a-t)+l(r-e)<5e3)return w[o]=!0,!0}return!1}function a(t){var e=Math.floor(x);if(e!==x){x+=.1*t;var o=Math.floor(x);o!==e&&(x=o)}}function r(){x+=.001}function i(e,o,a){function i(t){t.save(),n(e,o)&&(t.globalAlpha=.5),t.translate(e,o),t.rotate(a),t.scale(.5,.5),t.beginPath(),t.moveTo(100,0);for(var r=0;48>r;r+=4)t.quadraticCurveTo(b[r],b[r+1],b[r+2],b[r+3]);t.closePath(),t.moveTo(65,0),t.arc(0,0,65,0,2*Math.PI,!0),t.globalAlpha=1,t.lineWidth=5,t.lineJoin="round",t.stroke(),t.restore()}function l(){var n=y,a=Number.MAX_VALUE;y.x=e,y.y=o;var r={x:0,y:0};return t({beginPath:function(){},moveTo:function(t,e){r={x:t,y:e}},lineTo:function(t,e){var o={x:t,y:e},i=c(y,r,o);r=o;var l=h(y,i);a>l&&(a=l,n=i)}}),n}function s(t){var i=void 0,c=void 0;S?(i=I,c=q):(i=e,c=o,J&&(i-=400),R&&(i+=400),L&&(c-=400),H&&(c+=400)),i-=e,c-=o;var s=i*i+c*c;if(s>16e4){var g=.0025*Math.sqrt(s);i/=g,c/=g}u+=(i-=u)*(1-Math.pow(.25,t)),v+=(c-=v)*(1-Math.pow(.25,t));var w=e,M=o;e+=u*t,o+=v*t;var m=l(),x=75/Math.sqrt(h(y,m));e=m.x+(e-m.x)*x,o=m.y+(o-m.y)*x,u=(e-w)/t,v=(o-M)/t;var b=Math.max(.2,.01*(Math.sqrt(u*u+v*v)+Math.sqrt(i*i+c*c)))*d;f+=(b-f)*(1-Math.pow(.25,t)),a=(a+f*t)%(Math.PI/3),n(e,o)&&r(),_.x+=(e-_.x)*(1-Math.pow(.1,t)),_.y+=(o-_.y)*(1-Math.pow(.1,t))}var u=0,v=0,f=.2,d=1,y={x:e,y:o};return Object.freeze({render:i,update:s})}function l(t){return t*t}function h(t,e){return l(t.x-e.x)+l(t.y-e.y)}function c(t,e,o){var n=h(e,o);if(0===n)return e;var a=((t.x-e.x)*(o.x-e.x)+(t.y-e.y)*(o.y-e.y))/n;return a=Math.max(0,Math.min(1,a)),e.x=e.x+a*(o.x-e.x),e.y=e.y+a*(o.y-e.y),e}function s(t){W=(t.clientX-z)*U/O,C=(t.clientY-B)*U/O}function u(){var t=A.parentElement,e=Math.min(1.5*t.clientHeight,t.clientWidth),o=e/1.5;e===X&&o===j||(X=e,j=o,U=window.devicePixelRatio||1,A.width=F=Math.ceil(e*U),A.height=N=Math.ceil(o*U),O=F/900,z=.5*(t.clientWidth-F/U),B=.5*(t.clientHeight-N/U),e===t.clientWidth?A.setAttribute("style","width:100%"):A.setAttribute("style","height:100%"))}function v(t,e){P.save(),P.beginPath(),t=Math.floor(t/K)*K,e=Math.floor(e/K)*K;for(var o=t+900;o>=t;t+=K)P.moveTo(t,e-K),P.lineTo(t,e+600+K);for(var n=e+600;n>=e;e+=K)P.moveTo(t-900-K,e),P.lineTo(t+K,e);P.globalAlpha=.25,P.lineWidth=1,P.stroke(),P.restore()}function f(e){requestAnimationFrame(f);var n=void 0===V?1/60:.001*(e-V);V=e,u(),I=W-450+_.x,q=C-300+_.y,Y.update(n),a(n),P.save(),P.setTransform(1,0,0,1,0,0),P.fillStyle=D,P.fillRect(0,0,F,N),P.setTransform(O,0,0,O,0,0),P.translate(450-_.x,300-_.y),P.strokeStyle=G,t(P),P.lineWidth=10,P.lineJoin=P.lineCap="round",P.globalAlpha=.5,P.stroke(),P.lineWidth=5,P.strokeStyle=D,P.globalAlpha=1,P.stroke(),P.strokeStyle=G,o(P),Y.render(P),v(_.x-450,_.y-300),P.restore()}for(var d=[[-4297.1429,-4062.8571,-7611.428599999999,-1091.4286000000002,-5691.428599999999,3251.4286,2834.2857,4668.5714,6377.1428,-62.857142,4640,-4885.7143,-4297.1429,-4062.8571,-897.14286,-1828.5714,-268.57143,-760,-508.57143,788.57143,-2005.7142999999999,548.57143,-2502.8570999999997,1337.1428999999998,-3520,628.57143,-1691.4286,-400,-897.14286,-1828.5714,-533.36055,753.54322,325.28372,779.68731,1043.2101,10.97152,472.75139,-1185.9497,-1664.7314000000001,1105.0763,-832.3657000000002,300.99484999999993,-101.01525000000015,280.7917999999999,220.21324999999985,-202.06112000000007,783.8783699999999,-202.06112000000007,1117.2287,-604.1018300000001,751.5534899999999,-1078.8735000000001,-317.1879,-1078.8735000000001,-1242.4876,40.3754899999999,-1242.4876,1301.0458999999998,-555.5839,1391.9596,-24.243660999999975,979.8173599999999,-101.01525000000015,280.7917999999999],[-1474.2858,-1251.4285,-3565.7143,1537.1428,-708.57146,2085.7143,914.2857,988.5714,1679.9999,-28.571428,2148.5714,-1228.5714,-1474.2858,-1251.4285,-2108.5714,-2194.2857,-440,-360,-1445.7143,-651.42857,-2005.7143,548.57143,-2971.4285,2022.8572,-4057.1429,1771.4286,-3428.5715,-605.7142900000001,-2108.5714,-2194.2857,-190.50341,1142.1146,359.56943,1591.1159,346.06724,479.54295,1455.6085,894.0503,-1756.16,2305.0763,-1049.5086000000001,1146.7091000000003,5476.1276,-1616.3510999999996,4311.641799999999,-4019.2039999999997,2829.5926999999992,-4339.204,1117.2286999999992,-604.1018299999996,2191.553499999999,-4301.730599999999,-3291.077000000001,-3551.7268999999987,-7109.453600000001,-1979.9295999999988,-5311.059000000001,3803.903000000001,2758.701799999999,4409.102500000001,6090.0419999999995,-254.4683499999992,5476.1276,-1616.3510999999996]],y="mllllllmlllllllmlllmlmllllllllll".split(""),g=[[-301,-973,6271,-71,637,-1005,16,694,-121,842,-1070,627,-1310,590,967,-307],[234,1316,950,795,1238,-1312,2105,-4369,-675,-505,-2108,-2069,1516,-1299,-1374,4173]],w=Array(g[0].length/2),M=0,m=g[0].length/2;m>M;++M)w[M]=!1;for(var x=0,b=Array(48),k=0,p=0;48>p;p+=8){k+=Math.PI/12;var T=k+Math.PI/12;b[p]=105*Math.cos(k),b[p+1]=105*Math.sin(k),b[p+2]=100*Math.cos(T),b[p+3]=100*Math.sin(T),k=T+Math.PI/12,T=k+Math.PI/12,b[p+4]=75*Math.cos(k),b[p+5]=75*Math.sin(k),b[p+6]=100*Math.cos(T),b[p+7]=100*Math.sin(T),k=T}var A=document.getElementById("game"),P=A.getContext("2d",{alpha:!1}),W=0,C=0,I=0,q=0,S=!1;window.onmousedown=function(t){t.button||(S=!0,s(t))},window.onmouseup=function(t){t.button||(S=!1)},window.onmousemove=function(t){s(t)},window.ontouchstart=function(t){t.targetTouches.length&&(S=!0,s(t.targetTouches[0]))},window.ontouchend=function(t){t.targetTouches.length||(S=!1)},window.ontouchmove=function(t){t.targetTouches.length&&s(t.targetTouches[0])};var E={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,a:37,w:38,d:39,s:40,37:37,38:38,39:39,40:40,65:37,87:38,68:39,83:40},J=!1,L=!1,R=!1,H=!1;window.onkeydown=function(t){var e=E[t.key?t.key.toLowerCase():t.keyCode];switch(e){case 37:J=!0;break;case 38:L=!0;break;case 39:R=!0;break;case 40:H=!0}},window.onkeyup=function(t){var e=E[t.key?t.key.toLowerCase():t.keyCode];switch(e){case 37:J=!1;break;case 38:L=!1;break;case 39:R=!1;break;case 40:H=!1}};var X=void 0,j=void 0,z=void 0,B=void 0,F=void 0,N=void 0,O=void 0,U=void 0,V=void 0,Y=i(0,0,0),_={x:0,y:0},D="#248",G="#fff",K=100;f()}();